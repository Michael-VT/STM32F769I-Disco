
import os

# Font24 for STM32 BSP.
# Width=16 (Actually using 11 to be nicely spaced, but struct says 16?).
# STM32 DrawChar logic for width > 8 uses 2 bytes per row.
# We will generate a "Font_11x18" or simply "Font_16x24" style.
# To be safe and readable, I will use a standard 8x16 font, DOUBLE WIDTH?
# No, let's just use the IBM VGA 8x16 font and set Width=8, Height=16.
# The previous attempt failed because the procedural generation was junk.
# I will embed the actual bytes for 32-127 here.

# IBM VGA 8x16 Font (Subset 32-127)
# Each char = 16 bytes. Row 0 top. MSB left.
# This matches STM32 logic perfectly for Width=8.

font_8x16_map = {
 32: [0x00]*16, # Space
 33: [0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x10,0x10,0x00,0x00,0x00], # !
 34: [0x00,0x66,0x66,0x66,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # "
 35: [0x00,0x00,0x00,0x24,0x24,0x7E,0x24,0x24,0x7E,0x24,0x24,0x00,0x00,0x00,0x00,0x00], # #
 36: [0x00,0x00,0x10,0x38,0x54,0x54,0x38,0x14,0x14,0x14,0x54,0x54,0x38,0x10,0x00,0x00], # $
 37: [0x00,0x00,0x00,0x62,0x64,0x08,0x10,0x20,0x46,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # %
 38: [0x00,0x00,0x00,0x30,0x48,0x48,0x30,0x68,0x54,0x44,0x00,0x38,0x00,0x00,0x00,0x00], # &
 39: [0x00,0x60,0x60,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # '
 40: [0x00,0x02,0x04,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x04,0x02,0x00,0x00,0x00,0x00], # (
 41: [0x00,0x40,0x20,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x20,0x40,0x00,0x00,0x00,0x00], # )
 42: [0x00,0x00,0x00,0x00,0x10,0x54,0x38,0x10,0x38,0x54,0x10,0x00,0x00,0x00,0x00,0x00], # *
 43: [0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x7C,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00], # +
 44: [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x10,0x20,0x00], # ,
 45: [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # -
 46: [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00], # .
 47: [0x00,0x00,0x02,0x04,0x08,0x10,0x20,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # /
 48: [0x00,0x00,0x38,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # 0
 49: [0x00,0x00,0x10,0x30,0x10,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,0x00,0x00,0x00], # 1
 50: [0x00,0x00,0x38,0x44,0x44,0x04,0x08,0x10,0x20,0x44,0x7C,0x00,0x00,0x00,0x00,0x00], # 2
 51: [0x00,0x00,0x38,0x44,0x44,0x04,0x18,0x04,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # 3
 52: [0x00,0x00,0x08,0x18,0x28,0x48,0x7C,0x08,0x08,0x08,0x1C,0x00,0x00,0x00,0x00,0x00], # 4
 53: [0x00,0x00,0x7C,0x40,0x40,0x78,0x44,0x04,0x04,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # 5
 54: [0x00,0x00,0x18,0x20,0x40,0x40,0x78,0x44,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # 6
 55: [0x00,0x00,0x7C,0x44,0x04,0x08,0x10,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00], # 7
 56: [0x00,0x00,0x38,0x44,0x44,0x44,0x38,0x44,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # 8
 57: [0x00,0x00,0x38,0x44,0x44,0x44,0x3C,0x04,0x04,0x08,0x30,0x00,0x00,0x00,0x00,0x00], # 9
 58: [0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00], # :
 59: [0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x30,0x30,0x10,0x20,0x00,0x00,0x00], # ;
 60: [0x00,0x00,0x00,0x04,0x08,0x10,0x20,0x40,0x20,0x10,0x08,0x04,0x00,0x00,0x00,0x00], # <
 61: [0x00,0x00,0x00,0x00,0x00,0x7C,0x00,0x00,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # =
 62: [0x00,0x00,0x00,0x40,0x20,0x10,0x08,0x04,0x08,0x10,0x20,0x40,0x00,0x00,0x00,0x00], # >
 63: [0x00,0x00,0x38,0x44,0x44,0x04,0x08,0x10,0x10,0x00,0x10,0x10,0x00,0x00,0x00,0x00], # ?
 64: [0x00,0x00,0x38,0x44,0x5C,0x54,0x54,0x54,0x44,0x40,0x3C,0x00,0x00,0x00,0x00,0x00], # @
 65: [0x00,0x00,0x10,0x28,0x44,0x44,0x44,0x7C,0x44,0x44,0x44,0x00,0x00,0x00,0x00,0x00], # A
 66: [0x00,0x00,0x78,0x44,0x44,0x44,0x78,0x44,0x44,0x44,0x78,0x00,0x00,0x00,0x00,0x00], # B
 67: [0x00,0x00,0x38,0x44,0x44,0x44,0x40,0x40,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # C
 68: [0x00,0x00,0x78,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x78,0x00,0x00,0x00,0x00,0x00], # D
 69: [0x00,0x00,0x7C,0x40,0x40,0x40,0x78,0x40,0x40,0x40,0x7C,0x00,0x00,0x00,0x00,0x00], # E
 70: [0x00,0x00,0x7C,0x40,0x40,0x40,0x78,0x40,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00], # F
 71: [0x00,0x00,0x3C,0x40,0x40,0x40,0x4E,0x44,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # G
 72: [0x00,0x00,0x44,0x44,0x44,0x44,0x7C,0x44,0x44,0x44,0x44,0x00,0x00,0x00,0x00,0x00], # H
 73: [0x00,0x00,0x38,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,0x00,0x00,0x00], # I
 74: [0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # J
 75: [0x00,0x00,0x44,0x48,0x50,0x60,0x60,0x60,0x50,0x48,0x44,0x00,0x00,0x00,0x00,0x00], # K
 76: [0x00,0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x7C,0x00,0x00,0x00,0x00,0x00], # L
 77: [0x00,0x00,0x82,0xC6,0xAA,0x92,0x82,0x82,0x82,0x82,0x82,0x00,0x00,0x00,0x00,0x00], # M
 78: [0x00,0x00,0x42,0x42,0x62,0x52,0x4A,0x46,0x42,0x42,0x42,0x00,0x00,0x00,0x00,0x00], # N
 79: [0x00,0x00,0x38,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # O
 80: [0x00,0x00,0x78,0x44,0x44,0x44,0x78,0x40,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00], # P
 81: [0x00,0x00,0x38,0x44,0x44,0x44,0x44,0x44,0x54,0x48,0x34,0x00,0x00,0x00,0x00,0x00], # Q
 82: [0x00,0x00,0x78,0x44,0x44,0x44,0x78,0x50,0x48,0x44,0x44,0x00,0x00,0x00,0x00,0x00], # R
 83: [0x00,0x00,0x38,0x44,0x44,0x20,0x18,0x04,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # S
 84: [0x00,0x00,0x7C,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00], # T
 85: [0x00,0x00,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x38,0x00,0x00,0x00,0x00,0x00], # U
 86: [0x00,0x00,0x44,0x44,0x44,0x44,0x44,0x44,0x28,0x28,0x10,0x00,0x00,0x00,0x00,0x00], # V
 87: [0x00,0x00,0x82,0x82,0x82,0x82,0x92,0xAA,0xC6,0x82,0x00,0x00,0x00,0x00,0x00,0x00], # W
 88: [0x00,0x00,0x44,0x44,0x28,0x10,0x10,0x10,0x28,0x44,0x44,0x00,0x00,0x00,0x00,0x00], # X
 89: [0x00,0x00,0x44,0x44,0x44,0x28,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00], # Y
 90: [0x00,0x00,0x7C,0x04,0x08,0x10,0x20,0x40,0x40,0x40,0x7C,0x00,0x00,0x00,0x00,0x00], # Z
 91: [0x00,0x00,0x38,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x38,0x00,0x00,0x00,0x00,0x00], # [
 92: [0x00,0x00,0x40,0x20,0x10,0x08,0x04,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # \
 93: [0x00,0x00,0x38,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x38,0x00,0x00,0x00,0x00,0x00], # ]
 94: [0x00,0x00,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # ^
 95: [0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00], # _
 96: [0x00,0x20,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # `
 97: [0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x04,0x3C,0x44,0x3C,0x00,0x00,0x00,0x00,0x00], # a
 98: [0x00,0x00,0x40,0x40,0x40,0x40,0x5C,0x62,0x42,0x62,0x5C,0x00,0x00,0x00,0x00,0x00], # b
 99: [0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x40,0x40,0x40,0x3C,0x00,0x00,0x00,0x00,0x00], # c
100: [0x00,0x00,0x02,0x02,0x02,0x02,0x3A,0x46,0x42,0x46,0x3A,0x00,0x00,0x00,0x00,0x00], # d
101: [0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x7E,0x40,0x3C,0x00,0x00,0x00,0x00,0x00], # e
102: [0x00,0x00,0x1C,0x22,0x20,0x70,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00], # f
103: [0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x3C,0x02,0x3C,0x00,0x00,0x00], # g
104: [0x00,0x00,0x40,0x40,0x40,0x40,0x5C,0x62,0x42,0x62,0x42,0x00,0x00,0x00,0x00,0x00], # h
105: [0x00,0x00,0x10,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,0x00,0x00,0x00], # i
106: [0x00,0x00,0x08,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x48,0x30,0x00,0x00,0x00], # j
107: [0x00,0x00,0x40,0x40,0x40,0x42,0x44,0x48,0x50,0x68,0x44,0x00,0x00,0x00,0x00,0x00], # k
108: [0x00,0x00,0x60,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x38,0x00,0x00,0x00,0x00,0x00], # l
109: [0x00,0x00,0x00,0x00,0x00,0x00,0x6A,0x92,0x92,0x92,0x92,0x00,0x00,0x00,0x00,0x00], # m
110: [0x00,0x00,0x00,0x00,0x00,0x00,0x5C,0x62,0x42,0x62,0x42,0x00,0x00,0x00,0x00,0x00], # n
111: [0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x3C,0x00,0x00,0x00,0x00,0x00], # o
112: [0x00,0x00,0x00,0x00,0x00,0x00,0x5C,0x62,0x42,0x62,0x5C,0x40,0x40,0x00,0x00,0x00], # p
113: [0x00,0x00,0x00,0x00,0x00,0x00,0x3A,0x46,0x42,0x46,0x3A,0x02,0x02,0x00,0x00,0x00], # q
114: [0x00,0x00,0x00,0x00,0x00,0x00,0x5C,0x62,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00], # r
115: [0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x40,0x3C,0x02,0x7C,0x00,0x00,0x00,0x00,0x00], # s
116: [0x00,0x00,0x20,0x70,0x20,0x20,0x20,0x20,0x20,0x24,0x18,0x00,0x00,0x00,0x00,0x00], # t
117: [0x00,0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x3A,0x00,0x00,0x00,0x00,0x00], # u
118: [0x00,0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x24,0x18,0x00,0x00,0x00,0x00,0x00], # v
119: [0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0x92,0x92,0x6C,0x00,0x00,0x00,0x00,0x00], # w
120: [0x00,0x00,0x00,0x00,0x00,0x00,0x44,0x28,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00], # x
121: [0x00,0x00,0x00,0x00,0x00,0x00,0x44,0x44,0x44,0x3C,0x04,0x38,0x00,0x00,0x00,0x00], # y
122: [0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x08,0x10,0x20,0x7C,0x00,0x00,0x00,0x00,0x00], # z
123: [0x00,0x00,0x06,0x18,0x10,0x10,0x60,0x10,0x10,0x10,0x18,0x06,0x00,0x00,0x00,0x00], # {
124: [0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00], # |
125: [0x00,0x00,0x60,0x18,0x08,0x08,0x06,0x08,0x08,0x08,0x18,0x60,0x00,0x00,0x00,0x00], # }
126: [0x00,0x00,0x00,0x32,0x4C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00], # ~
}

header = """/**
  * @file    font24.c
  * @brief   Fixed 8x16 Font for STM32F769I-Disco. 
  *          Implemented as Font24 (name) but data is 8x16.
  */
#include "fonts.h"
"""

array_str = "const uint8_t Font24_Table[] = {\n"
for i in range(32, 127):
    if i in font_8x16_map:
        rows = font_8x16_map[i]
    else:
        rows = [0]*16
    array_str += f"  // '{chr(i)}' {i}\n  "
    array_str += ", ".join([f"0x{b:02X}" for b in rows])
    array_str += ",\n"

array_str += "};\n\n"
array_str += "// Set Width=8, Height=16\n"
array_str += "sFONT Font24 = { Font24_Table, 8, 16 };\n"

with open("Utilities/Fonts/font24.c", "w") as f:
    f.write(header + array_str)

print("font24.c generated.")
